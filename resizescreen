#!/bin/ba
output=$(xrandr | grep primary | sed -e 's/\s\+/\n/g' | head -n 1)
size=25
x=$(xrandr | grep -v connected | grep -v Screen | sed -e 's/\s\+/\n/g' | sed '/^$/d' | head -n 1 | sed -e 's/x/\n/g' | head -n 1)
y=$(xrandr | grep -v connected | grep -v Screen | sed -e 's/\s\+/\n/g' | sed '/^$/d' | head -n 1 | sed -e 's/x/\n/g' | tail -n 1)
current=$(xrandr | grep -v connected | grep -v Screen | sed -e 's/\s\+/\n/g' | sed '/^$/d' | head -n 1)

optstr=hs:  ## colon follows options that require an argument

while getopts $optstr var
do
  case $var in
    s) size=$OPTARG ;;
    h) echo "This is a simple script to give you a boosted virtual resolution +25% by default							. IE, the max resolution for many netbook is 1024x600. With this you can "trick" it to being 1280x750 by boosting it 25%. This can make it to blurry for some, but it helps you run apps that need a higher resolution. For 1024x600, I find the sweet spot to be 35%, but everybody has different taste/eyes. It is not recommended, but you can go as high as you want. Want 20000x20000, go for it. Don't expect to see much, but still. Go for it :).
    
-h this help
-s The size to increase by in %, without the % (example -s 25). Default is 25"; exit ;;
  esac
done
shift $(( $OPTIND - 1 )) 

newx=$(($x*$size))
newx=$(echo $newx | sed 's/.\{2\}$//')
newx=$(($newx + $x))

newy=$(($y*$size))
newy=$(echo $newy | sed 's/.\{2\}$//')
newy=$(($newy + $y))

scale=$(awk 'BEGIN{print '$newx' / '$x'}')


echo "Current Resolution	- $current"
echo "Scale			- $scale"
echo "New  Resolution		- "$newx"x"$newy""

echo "xrand command is	- xrandr --output $output --mode $current --panning "$newx"x"$newy" --scale "$scale"x"$scale""


xrandr --output $output --mode $current --panning "$newx"x"$newy" --scale "$scale"x"$scale"


