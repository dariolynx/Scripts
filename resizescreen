#!/bin/bash
#Grab the current used screen
output=$(xrandr | grep -e " connected [^(]" | sed -e "s/\([A-Z0-9]\+\) connected.*/\1/")
# Set the default screensize
size=25 
# Grabing the current X res
x=$(xrandr | grep -v connected | grep -v Screen | sed -e 's/\s\+/\n/g' | sed '/^$/d' | head -n 1 | sed -e 's/x/\n/g' | head -n 1) 
# Grabing the current y res
y=$(xrandr | grep -v connected | grep -v Screen | sed -e 's/\s\+/\n/g' | sed '/^$/d' | head -n 1 | sed -e 's/x/\n/g' | tail -n 1) 
# Grabbing the max actual screen res
real=$(xrandr | grep -v connected | grep -v Screen | sed -e 's/\s\+/\n/g' | sed '/^$/d' | head -n 1) 
# This grabs the current screensize, be it the actual size or virtual
current=$(xrandr | grep Screen | sed -e 's/\,/\n/g' | grep current | sed -e 's/ x /x/g' | sed -e 's/\s\+/\n/g' | sed '/^$/d' | grep -v current) 



# Grab the command options
optstr=hs:   

while getopts $optstr var
do
  case $var in
    s) size=$OPTARG ;;
    h) echo "This is a simple script to give you a boosted virtual resolution +25% by default. IE, the max resolution for many netbook is 1024x600. With this you can "trick" it to being 1280x750 by boosting it 25%. This can make it to blurry for some, but it helps you run apps that need a higher resolution. For 1024x600, I find the sweet spot to be 35%, but everybody has different taste/eyes. It is not recommended, but you can go as high as you want. Want 20000x20000, go for it. Don't expect to see much, but still. Go for it :).
    
-h this help
-s The size to increase by in %, without the % (example -s 25). Default is 25"; exit ;;
  esac
done
shift $(( $OPTIND - 1 )) 

# Thanks to /u/Schmeidenbacher on Reddit for this. Grabs the new boosted screen size

newx=$(( $x * ( 100 +  $size )  / 100  ))
newy=$(( $y * ( 100 +  $size )  / 100  ))


scale=$(awk 'BEGIN{print '$newx' / '$x'}')


# This provides some feedback
echo "Real Resolution	- $real"
echo "Current Resolution	- $current"
echo "New  Resolution		- "$newx"x"$newy""
echo "Scale			- $scale"
echo "xrand command is	- xrandr --output $output --mode $real --panning "$newx"x"$newy" --scale "$scale"x"$scale""

read -p "Press any key to continue." -s

# The actual command that boosts your screen size
xrandr --output $output --mode $real --panning "$newx"x"$newy" --scale "$scale"x"$scale"
